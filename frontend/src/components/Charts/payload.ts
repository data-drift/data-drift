import { MetricEvolution, YearMonthString } from "./StepChart";

const payload = {
  datasets: [
    {
      data: [
        { x: 316.423287037037, y: 0 },
        { x: 316.4266087962963, y: 0 },
        { x: 316.4275, y: 0 },
        { x: 316.42751157407406, y: 0 },
        { x: 316.42898148148146, y: 0 },
        { x: 316.42899305555557, y: 0 },
        { x: 316.485162037037, y: 0 },
        { x: 317.22763888888886, y: 0 },
        { x: 318.579525462963, y: 0 },
        { x: 322.22565972222225, y: 0 },
        { x: 329.4198263888889, y: 0 },
        { x: 336.2250925925926, y: 0 },
        { x: 337.4739814814815, y: 0 },
        { x: 337.47414351851853, y: 0 },
        { x: 343.22749999999996, y: 0 },
        { x: 344.23555555555555, y: 0 },
        { x: 345.6502083333333, y: 0 },
        { x: 345.7151157407407, y: 0 },
        { x: 351.44136574074076, y: -0.03636452131842 },
        { x: 381.48615740740746, y: 0.32168615012449 },
        { x: 382.230462962963, y: -0.03636452131842 },
      ],
      label: "2022-02",
    },
    {
      data: [
        { x: 255.42328703703706, y: 0 },
        { x: 255.42660879629628, y: 0 },
        { x: 255.4275, y: 0 },
        { x: 255.42751157407406, y: 0 },
        { x: 255.4289814814815, y: 0 },
        { x: 255.42899305555557, y: 0 },
        { x: 255.48516203703704, y: 0 },
        { x: 256.22763888888886, y: 0 },
        { x: 257.579525462963, y: 0 },
        { x: 261.22565972222225, y: 0 },
        { x: 268.4198263888889, y: 0 },
        { x: 275.2250925925926, y: 0 },
        { x: 276.4739814814815, y: 0 },
        { x: 276.47414351851853, y: 0 },
        { x: 282.2275, y: 0 },
        { x: 283.23555555555555, y: 0 },
        { x: 284.6502083333333, y: 0 },
        { x: 284.7151157407407, y: 0 },
        { x: 290.44136574074076, y: 0 },
        { x: 296.2218055555556, y: 0 },
        { x: 304.4480324074074, y: 0 },
        { x: 319.70626157407406, y: -0.02245756068492 },
        { x: 320.4861574074074, y: 0.29819167714414 },
        { x: 321.230462962963, y: 0 },
        { x: 324.2224537037037, y: 0 },
        { x: 325.37077546296297, y: 0 },
        { x: 326.22422453703706, y: 0 },
        { x: 338.2248611111111, y: 0 },
        { x: 353.3780902777778, y: 0 },
        { x: 353.5720833333333, y: 0 },
        { x: 353.63807870370374, y: 0 },
        { x: 359.4134259259259, y: 0 },
        { x: 360.2883564814815, y: 0 },
        { x: 361.24394675925925, y: 0 },
        { x: 366.24252314814817, y: 0 },
        { x: 368.223287037037, y: 0 },
      ],
      label: "2022-04",
    },
    {
      data: [
        { x: 0.4480324074074074, y: 0 },
        { x: 15.706261574074075, y: -0.17640146440354 },
        { x: 16.486157407407408, y: -0.11398248469152 },
        { x: 17.230462962962964, y: -0.17640146440354 },
        { x: 20.222453703703703, y: -0.11398248469152 },
        { x: 49.37809027777778, y: 0.31480876724324 },
        { x: 57.243946759259266, y: 0.44869295561106 },
      ],
      label: "2023-02",
    },
    {
      data: [
        { x: 344.423287037037, y: 0 },
        { x: 344.4266087962963, y: 0 },
        { x: 344.4275, y: 0 },
        { x: 344.42751157407406, y: 0 },
        { x: 344.4289814814815, y: 0 },
        { x: 344.42899305555557, y: 0 },
        { x: 344.48516203703707, y: 0 },
        { x: 345.22763888888886, y: 0 },
        { x: 346.579525462963, y: 0 },
        { x: 350.2256597222222, y: 0 },
        { x: 357.4198263888889, y: 0 },
        { x: 364.2250925925926, y: 0 },
        { x: 365.47398148148153, y: 0 },
        { x: 365.47414351851853, y: 0 },
        { x: 371.22749999999996, y: 0 },
        { x: 372.23555555555555, y: 0 },
        { x: 373.6502083333333, y: 0 },
        { x: 373.7151157407407, y: 0 },
        { x: 379.44136574074076, y: 0.03263395504281 },
        { x: 409.48615740740746, y: 0.45034857959079 },
        { x: 410.230462962963, y: 0.03263395504281 },
      ],
      label: "2022-01",
    },
    {
      data: [
        { x: 74.59192129629629, y: 0 },
        { x: 102.4224537037037, y: 0 },
        { x: 102.42328703703703, y: 0 },
        { x: 102.42660879629629, y: 0 },
        { x: 102.42750000000001, y: 0 },
        { x: 102.42751157407407, y: 0 },
        { x: 102.42898148148147, y: 0 },
        { x: 102.42899305555555, y: 0 },
        { x: 102.48516203703703, y: 0 },
        { x: 103.22763888888888, y: 0 },
        { x: 104.57952546296296, y: 0 },
        { x: 108.22565972222223, y: 0 },
        { x: 115.4198263888889, y: 0 },
        { x: 122.22509259259259, y: 0 },
        { x: 123.47398148148147, y: 0 },
        { x: 123.47414351851852, y: 0 },
        { x: 129.2275, y: 0 },
        { x: 130.23555555555555, y: 0 },
        { x: 131.65020833333332, y: -0.00006278757691 },
        { x: 166.7062615740741, y: -0.02078268795814 },
        { x: 167.4861574074074, y: 0.20085745854411 },
        { x: 168.23046296296295, y: -0.00006278757691 },
        { x: 200.37809027777777, y: -0.00461488690309 },
      ],
      label: "2022-09",
    },
    {
      data: [
        { x: 13.591921296296297, y: 0 },
        { x: 41.4224537037037, y: 0 },
        { x: 41.423287037037035, y: 0 },
        { x: 41.4266087962963, y: 0 },
        { x: 41.4275, y: -0.02389332906587 },
        { x: 41.427511574074074, y: 1.36525370964771 },
        { x: 70.65020833333334, y: 1.36532316699965 },
        { x: 105.70626157407408, y: 1.34698642608863 },
        { x: 106.4861574074074, y: 1.54313398795498 },
        { x: 107.23046296296296, y: 1.36532316699965 },
        { x: 139.37809027777777, y: 0.10008804413931 },
      ],
      label: "2022-11",
    },
    {
      data: [
        { x: 104.59192129629629, y: 0 },
        { x: 132.4224537037037, y: 0 },
        { x: 132.42328703703703, y: 0 },
        { x: 132.42660879629628, y: 0 },
        { x: 132.4275, y: 0 },
        { x: 132.4275115740741, y: 0 },
        { x: 132.4289814814815, y: 0 },
        { x: 132.42899305555554, y: 0 },
        { x: 132.48516203703704, y: 0 },
        { x: 133.2276388888889, y: 0 },
        { x: 134.57952546296295, y: 0 },
        { x: 138.22565972222222, y: 0 },
        { x: 145.41982638888888, y: 0 },
        { x: 152.22509259259257, y: 0 },
        { x: 153.47398148148147, y: 0 },
        { x: 153.4741435185185, y: 0 },
        { x: 159.2275, y: 0 },
        { x: 160.23555555555555, y: 0 },
        { x: 161.65020833333332, y: -0.00006850667606 },
        { x: 196.7062615740741, y: -0.01993544273381 },
        { x: 197.4861574074074, y: 0.21915285671983 },
        { x: 198.23046296296297, y: -0.00006850667606 },
      ],
      label: "2022-08",
    },
    {
      data: [
        { x: 135.5919212962963, y: 0 },
        { x: 163.4224537037037, y: 0 },
        { x: 163.42328703703703, y: 0 },
        { x: 163.42660879629628, y: 0 },
        { x: 163.4275, y: 0 },
        { x: 163.4275115740741, y: 0 },
        { x: 163.4289814814815, y: 0 },
        { x: 163.42899305555554, y: 0 },
        { x: 163.48516203703704, y: 0 },
        { x: 164.2276388888889, y: 0 },
        { x: 165.57952546296295, y: 0 },
        { x: 169.22565972222222, y: 0 },
        { x: 176.41982638888888, y: 0 },
        { x: 183.22509259259257, y: 0 },
        { x: 184.47398148148147, y: 0 },
        { x: 184.47414351851853, y: 0 },
        { x: 190.2275, y: 0 },
        { x: 191.23555555555558, y: 0 },
        { x: 192.65020833333332, y: -0.00007077569096 },
        { x: 227.7062615740741, y: -0.02059572606835 },
        { x: 228.4861574074074, y: 0.22641143536994 },
        { x: 229.23046296296297, y: -0.00007077569096 },
      ],
      label: "2022-07",
    },
    {
      data: [
        { x: 10.422453703703704, y: 0 },
        { x: 10.423287037037037, y: 0 },
        { x: 10.426608796296296, y: 0 },
        { x: 10.4275, y: 0 },
        { x: 10.427511574074074, y: 0.94349458127475 },
        { x: 39.65020833333333, y: 0.94351345116637 },
        { x: 75.4861574074074, y: 1.06428075756954 },
        { x: 76.23046296296296, y: 0.94351345116637 },
        { x: 108.37809027777779, y: 1.1762358245836 },
      ],
      label: "2022-12",
    },
    {
      data: [
        { x: 1.242523148148148, y: 0 },
        { x: 3.223287037037037, y: 0 },
      ],
      label: "2023-04",
    },
    {
      data: [
        { x: 43.5919212962963, y: 0 },
        { x: 71.42245370370371, y: 0 },
        { x: 71.42328703703704, y: 0 },
        { x: 71.42660879629629, y: 0 },
        { x: 71.4275, y: 0.018626459612 },
        { x: 71.42751157407407, y: 1.59713998605225 },
        { x: 100.65020833333334, y: 1.59723469686384 },
        { x: 135.7062615740741, y: 1.57639831831483 },
        { x: 136.4861574074074, y: 1.79928442824819 },
        { x: 137.23046296296295, y: 1.59723469686384 },
        { x: 169.37809027777777, y: 1.62517438628183 },
      ],
      label: "2022-10",
    },
    {
      data: [
        { x: 3.2248611111111107, y: 0 },
        { x: 18.378090277777776, y: 0.15580527012182 },
        { x: 26.24394675925926, y: 0.2825040612099 },
      ],
      label: "2023-03",
    },
    {
      data: [
        { x: 166.5919212962963, y: 0 },
        { x: 194.4224537037037, y: 0 },
        { x: 194.42328703703706, y: 0 },
        { x: 194.42660879629628, y: 0 },
        { x: 194.4275, y: 0 },
        { x: 194.42751157407406, y: 0 },
        { x: 194.4289814814815, y: 0 },
        { x: 194.42899305555557, y: 0 },
        { x: 194.48516203703704, y: 0 },
        { x: 195.2276388888889, y: 0 },
        { x: 196.57952546296295, y: 0 },
        { x: 200.22565972222222, y: 0 },
        { x: 207.41982638888888, y: 0 },
        { x: 214.22509259259257, y: 0 },
        { x: 215.47398148148147, y: 0 },
        { x: 215.47414351851853, y: 0 },
        { x: 221.2275, y: 0 },
        { x: 222.23555555555558, y: 0 },
        { x: 223.65020833333332, y: -0.00007628741206 },
        { x: 258.70626157407406, y: -0.02219963691006 },
        { x: 259.4861574074074, y: 0.24404343118656 },
        { x: 260.230462962963, y: -0.00007628741206 },
      ],
      label: "2022-06",
    },
    {
      data: [
        { x: 196.59192129629628, y: 0 },
        { x: 224.4224537037037, y: 0 },
        { x: 224.42328703703706, y: 0 },
        { x: 224.42660879629628, y: 0 },
        { x: 224.4275, y: 0 },
        { x: 224.42751157407406, y: 0 },
        { x: 224.4289814814815, y: 0 },
        { x: 224.42899305555557, y: 0 },
        { x: 224.48516203703704, y: 0 },
        { x: 225.2276388888889, y: 0 },
        { x: 226.57952546296295, y: 0 },
        { x: 230.22565972222222, y: 0 },
        { x: 237.41982638888888, y: 0 },
        { x: 244.22509259259257, y: 0 },
        { x: 245.47398148148147, y: 0 },
        { x: 245.47414351851853, y: 0 },
        { x: 251.2275, y: 0 },
        { x: 252.23555555555558, y: 0 },
        { x: 253.65020833333332, y: 0.00010245042987 },
        { x: 288.70626157407406, y: -0.0196499924494 },
        { x: 289.4861574074074, y: 0.26237555090157 },
        { x: 290.230462962963, y: 0.00010245042987 },
      ],
      label: "2022-05",
    },
    {
      data: [
        { x: 0.47414351851851855, y: 0 },
        { x: 6.2275, y: 0 },
        { x: 7.235555555555556, y: 0 },
        { x: 8.650208333333333, y: 0.00002757152997 },
        { x: 20.221805555555555, y: 0.37500037910854 },
        { x: 43.70626157407407, y: 0.19578543430996 },
        { x: 44.486157407407404, y: 0.31342396217774 },
        { x: 45.23046296296297, y: 0.19578543430996 },
        { x: 77.37809027777779, y: 0.21762208604541 },
      ],
      label: "2023-01",
    },
    {
      data: [
        { x: 285.423287037037, y: 0 },
        { x: 285.4266087962963, y: 0 },
        { x: 285.4275, y: 0 },
        { x: 285.42751157407406, y: 0 },
        { x: 285.42898148148146, y: 0 },
        { x: 285.42899305555557, y: 0 },
        { x: 285.485162037037, y: 0 },
        { x: 286.22763888888886, y: 0 },
        { x: 287.579525462963, y: 0 },
        { x: 291.22565972222225, y: 0 },
        { x: 298.4198263888889, y: 0 },
        { x: 305.2250925925926, y: 0 },
        { x: 306.4739814814815, y: 0 },
        { x: 306.47414351851853, y: 0 },
        { x: 312.2275, y: 0 },
        { x: 313.23555555555555, y: 0 },
        { x: 314.6502083333333, y: 0 },
        { x: 314.7151157407407, y: 0 },
        { x: 320.44136574074076, y: 0 },
        { x: 326.2218055555556, y: 0 },
        { x: 334.4480324074074, y: 0 },
        { x: 349.70626157407406, y: -0.02328935012325 },
        { x: 350.48615740740746, y: 0.3092361842091 },
        { x: 351.230462962963, y: 0 },
        { x: 354.2224537037037, y: 0 },
        { x: 355.37077546296297, y: 0 },
        { x: 356.22422453703706, y: 0 },
        { x: 368.2248611111111, y: 0 },
        { x: 383.3780902777778, y: 0 },
        { x: 383.5720833333333, y: 0 },
        { x: 383.63807870370374, y: 0 },
        { x: 389.4134259259259, y: 0 },
        { x: 390.2883564814815, y: 0 },
        { x: 391.24394675925925, y: 0 },
        { x: 396.24252314814817, y: 0 },
        { x: 398.223287037037, y: 0 },
      ],
      label: "2022-03",
    },
  ],
};

const payload2 = {
  datasets: [
    {
      data: [
        { x: 0, y: 0 },
        { x: 382.230462962963, y: -0.03636452131842 },
      ],
      label: "2022-02",
    },
    {
      data: [
        { x: 0, y: 0 },
        { x: 368.223287037037, y: 0 },
      ],
      label: "2022-04",
    },
    {
      data: [
        { x: 0, y: 0 },
        { x: 57.243946759259266, y: 0.44869295561106 },
      ],
      label: "2023-02",
    },
    {
      data: [
        { x: 0, y: 0 },
        { x: 410.230462962963, y: 0.03263395504281 },
      ],
      label: "2022-01",
    },
  ],
};

const mapPayloadToArgs = (data: typeof payload) => {
  const result = data.datasets.reduce(
    (
      acc: {
        metricNames: YearMonthString[];
        data: MetricEvolution;
      },
      dataset
    ) => {
      const newData = acc.data;
      const metricName = dataset.label as YearMonthString;
      dataset.data.forEach((dataPoint) => {
        newData.push({
          daysSinceFirstReport: dataPoint.x,
          [metricName]: dataPoint.y,
        });
      });
      return {
        metricNames: [...acc.metricNames, metricName].sort(),
        data: newData,
      };
    },
    {
      metricNames: [] as YearMonthString[],
      data: [] as MetricEvolution,
    }
  );
  return result;
};

export const args = mapPayloadToArgs(payload);
export const argsWithOnePoint = mapPayloadToArgs(payload2);
